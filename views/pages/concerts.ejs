<%- include('../partials/header') %>

    <section id="concerts" class="hero section-appear">
        <h1>Concerts</h1>
        <p>Retrouvez ici les prochaines dates de concerts d'Emilie Hedou.</p>
        <div class="concert-list">
            <% if (!concerts || concerts.length===0) { %>
                <p>Aucun concert à venir pour le moment.</p>
                <% } else { %>
                    <div class="concert-cards-grid">
                        <% concerts.forEach(concert=> { %>
                            <div class="concert-card">
                                <% if (concert.image_url) { %>
                                    <div class="concert-card-img-wrapper">
                                        <img src="<%= concert.image_url %>" alt="Affiche du concert" class="concert-img">
                                    </div>
                                    <% } %>
                                        <div class="concert-card-content">
                                            <div class="concert-info">
                                                <span class="concert-venue">
                                                    <%= concert.venue %>
                                                </span>
                                                <span class="concert-date">
                                                    <% let dateStr='' ; if (concert.concert_date) { if (typeof concert.concert_date==='object' &&
                                                        concert.concert_date.toLocaleDateString) {
                                                        dateStr=concert.concert_date.toLocaleDateString(); } else if (typeof
                                                        concert.concert_date==='string' ) { const parts=concert.concert_date.split('-'); if
                                                        (parts.length===3) dateStr=`${parts[2]}/${parts[1]}/${parts[0]}`; else
                                                        dateStr=concert.concert_date; } } %>
                                                        <%= dateStr %>
                                                </span>
                                                <% if (concert.concert_time) { %>
                                                    <span class="concert-time">
                                                        à <%= String(concert.concert_time).slice(0,5).replace(':','h') %>
                                                    </span>
                                                    <% } %>
                                            </div>
                                            <h3 class="concert-artist">
                                                <%= concert.artist_name %>
                                            </h3>
                                            <% if (concert.description) { %>
                                                <p class="concert-description">
                                                    <%= concert.description %>
                                                </p>
                                                <% } %>
                                                    <% if (concert.ticket_price && Number(concert.ticket_price)> 0) { %>
                                                        <p class="concert-price"><strong>Prix :</strong>
                                                            <%= Number(concert.ticket_price).toFixed(2) %> €
                                                        </p>
                                                        <% } %>
                                                            <% if (concert.phone) { %>
                                                                <p class="concert-phone"><strong>Réservation :</strong> <a
                                                                        href="tel:<%= concert.phone %>">
                                                                        <%= concert.phone %>
                                                                    </a></p>
                                                                <% } %>
                                        </div>
                            </div>
                              
                            <% }); %>
                    </div>
                    <% } %>
        </div>

    </section>

    <%- include('../partials/footer') %>